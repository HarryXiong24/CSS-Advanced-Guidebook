# 盒子模型



## 盒子大小的计算



**HTML盒模型由4个元素组成:content padding border margin (按由内到外的顺序)**

**盒子大小的计算方法:** content(内容区)+padding(内边距)+border(边框)+margin(外边距)



**注意:**

因为不同的浏览器会为盒子自动添加不同的内外边距.如果要让网页在每一个浏览器上都显示一样的效果.需要在写代码前把默认的边距全部清空,在平时可以用通配符选择器来清空,但是写正规项目的时候不要这样写,因为通配符选择器的权重太低了



## margin 的注意点

- 两个紧挨的兄弟盒子同时设margin,左右两边的margin会叠加,而上下的margin会重叠,margin值更大的盒子的margin会生效

- 当两个盒子是父子关系时,设置子盒子左右的margin值会让子盒子在父盒子里面进行偏移,如果设置上下的 margin 值则会有 margin 重合的现象,让父盒子也跟着子盒子一起移动,给父盒子添加 border 属性可以避免这种现象



## box-sizing

`box-sizing`指定盒状模型的宽度范围。

- `border-box`：宽度包括padding和border
- `content-box`：默认值，只包括内容区的宽度，不包括padding和border

```css
*, *:after, *:before {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
```

**box-sizing属性能改变盒子大小的计算方法**

```css
box-sizing：content-box|border-box;
```

默认值是content-box, 默认情况下 width 和 height 只改变内容区

**border-box能让盒子变为怪异盒模型,**怪异盒模型的计算方式和普通内容盒模型的计算方式不同,怪异盒模型是把padding和border的宽度一起算入width和height中,当宽度和高度固定时,变化padding和border值会自动的将内容区域缩小。



## 边框 border

### 一般边框

**border属性是一个复合属性,可以按照border-width border-style border-color的顺序设置边框**

border:宽度 样式 颜色

- **border-width属性,定义边框厚度**

| 值       | 描述                           |
| -------- | ------------------------------ |
| thin     | 定义细的边框。                 |
| medium   | 默认。定义中等的边框。         |
| thick    | 定义粗的边框。                 |
| *length* | 允许自定义边框的宽度。         |
| inherit  | 规定应该从父元素继承边框宽度。 |

通常情况下边框的宽度都是直接写固定的值

- **border-style属性定义边框的样式**

| 值      | 描述                                                         |
| ------- | ------------------------------------------------------------ |
| none    | 定义无边框。除非用border-image边框才能使边框生效             |
| hidden  | 与 "none" 相同。不过应用于表时除外，对于表，hidden 用于解决边框冲突。 |
| dotted  | 定义点状边框。在大多数浏览器中呈现为实线。                   |
| dashed  | 定义虚线。在大多数浏览器中呈现为实线。                       |
| solid   | 定义实线。                                                   |
| double  | 定义双线。双线的宽度等于 border-width 的值。                 |
| groove  | 定义 3D 凹槽边框。其效果取决于 border-color 的值。           |
| ridge   | 定义 3D 垄状边框。其效果取决于 border-color 的值。           |
| inset   | 定义 3D inset 边框。其效果取决于 border-color 的值。         |
| outset  | 定义 3D outset 边框。其效果取决于 border-color 的值。        |
| inherit | 规定应该从父元素继承边框样式。                               |

- **border-color属性, 定义边框线的颜色** 
  **注意:** 
  以上的三个属性也全部都是复合属性,都是上下左右四个方向的复合属性结构,只写一个值是上下左右四个面全 
  部都是那个值,可以通过如:border-top-width这样的写法来单独设置某一个面,也可以写四个值来分别显示四个 
  面的结果 ,一样的遵循上右下左的格式



### 圆角边框

**border-radius属性决定是否边角出现圆角**

这个属性也是个复合属性, 决定左上 右上 右下 左下四个方向的圆角大小

也可以只写一个来代表所有方向,这个属性和border属性无关,即使没有边框也可以作用

**注意:这个属性经常用做显示胶囊状的盒子,同时如果盒子的宽高相等,再将这个属性设置为50%，就会出现圆形的盒子**



### 图像边框

**border-image属性设置是否用图像边框.**启用的这个属性border-style设置的边框将会无效,同时这个属性也是个复合属性

```css
border-image:border-image-sorce border-image-slice/border-image-width/*(/号不是或者的意思,如果要写必须写/）*/ border-image-outside border-image-repeat
/*具体用法如下*/
border-image:url() slice/width outside repeat;
```

- **border-image-sorce属性用于指定要用于绘制边框的图像的位置**,该属性默认值是none,如果要传入图片和写 
  背景图片的用法是一样的用url("")来传入图片的地址
- **border-image-slice属性控制边框图像地切片方式**,也是指定四个位置

```css
border-image-slice: number|%|fill;
```

- 这个属性的值可以是具体的数值也可以是百分比,如果后面再加fill表示保留着中间部分，相当于盒子作为了背 
  景图片 
  **注意:** 此属性指定顶部 ，右，底部，左边缘的图像向内偏移，分为九个区域：四个角，四边和中间。图像中间部分将被丢弃（完全透明的处理），除非填写关键字。如果省略第四个数字/百分比，它和第二个相同的。如果也省略了第三个，它和第一个是相同的。如果也省略了第二个，它和第一个是相同的。
- **border-image-width属性用于指定使用多厚的边框来承载被裁剪后的图像**

```css
border-image-width: number|%|auto;
```

- 该属性的值可以是具体的数值也可以是百分比,默认是1,该属性同样也是包含上右下左的复合属性,该属性有一 
  个值是auto,如果指定了，宽度是相应的image-slice的内在宽度或高度
- **border-image-outside属性指定边框图像向外扩展所定义的数值**,默认值是0的长度,这个值可以用具体的带单 
  位的数值和用纯数字来作为值,纯数字代表border-width的倍数
- **border-image-repeat属性用于指定边框图像地填充方式** ,默认值为stretch,拉伸图像来填充区域

```css
border-image-repeat: stretch|repeat|round|initial|inherit;
```

| 值      | 描述                                                         |
| ------- | ------------------------------------------------------------ |
| stretch | 默认值。拉伸图像来填充区域                                   |
| repeat  | 平铺（repeated）图像来填充区域。                             |
| round   | 类似 repeat 值。如果无法完整平铺所有图像，则对图像进行缩放以适应区域。 |
| space   | 类似 repeat 值。如果无法完整平铺所有图像，扩展空间会分布在图像周围 |
| initial | 将此属性设置为默认值。                                       |
| inherit | 从父元素中继承该属性。                                       |



**注:**border-collapse属性指定是否用做合成单一的边框,这个属性一般都是给表格使用的,默认值是separate



## 盒子阴影

**box-shadow属性为是否显示盒子阴影**,默认值是none没有阴影,这个属性的用法text-shadow用法基本一致

有阴影box-shadow:水平偏移量 垂直偏移量 阴影模糊半径 阴影扩展半径 阴影颜色 

可以在最后加上inset表示阴影是否是内阴影, 默认是外阴影outset

阴影扩展是在原本阴影的上下左右再继续添加阴影,如果没有写阴影颜色,阴影颜色由盒子内容的颜色决定

**所以简写只用写前面3个**



## 盒子表现形式

### display

**display属性,这个属性能从根本上改变盒子的存在方式**

常用的值有 none inline block inline-block以及flex(弹性盒子)

`display: none;`会从文档流移除该元素及其子元素，仿佛它们是不存在的。它们占据的空间会释放出来。

`display: inline;`产生行内元素，没有自己的高度和宽度，由容器决定，前后不会产生换行。

`display: block;`产生块级元素，会占据一行，占满容器的宽度。

`display: list-item;`将元素渲染为一个列表项，行首产生一个列表标记，可以用`list-style`定制样式。

`display: inline-block;`产生行内的块级元素，有自己的高和宽，但是前后不会产生换行。

### visibility

**visibility属性，用于显示或隐藏元素而不更改文档的布局**

但是无论怎么设置原本的盒子都不会脱离文档流,依然会占据其本来的空间,默认值是visible可见的

| 值       | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| visible  | 默认值。元素是可见的。                                       |
| hidden   | 元素是不可见的。                                             |
| collapse | 当在表格元素中使用时，此值可删除一行或一列，但是它不会影响表格的布局。被行或列占据的空间会留给其他内容使用。如果此值被用在其他的元素上，会呈现为 "hidden"。 |
| inherit  | 规定应该从父元素继承 visibility 属性的值。                   |



### display:none 和 visibility:hidden 对比

display:none，使用该属性后，HTML元素（对象）的宽度、高度等各种属性值都将“丢失”;

visibility:hidden，使用该属性后，HTML元素（对象）仅仅是在视觉上看不见（完全透明），而它所占据的空间位置仍然存在，也即是说它仍具有高度、宽度等属性值。



### opacity

**opacity属性设置一个元素的透明度**

值为0到1,0为完全透明,1为正常显示,默认值是1

**注意:**

1. 这个属性在ie8以及ie8以下的浏览器不起作用,但是ie浏览器有自己设置透明度的方式
2. filter:alpha(opacity=num)这个属性能代替opacity在ie浏览器中生效,但是值是0到100,对应opacity的0到1
3. 如要要兼容ie8浏览器,可以两个属性都写上,应为其他浏览器不支持下方的属性,该属性相当于没有写



### 让盒子在页面中消失

- display:none：能让一个盒子脱离文档流在一个页面中完全消失并且不可被选中
- visiblity:hidden：能让一个盒子在页面中隐藏但是还是占据了原本的位置,并没有脱离文档流
- opacity：能让一个盒子的透明度为0从而达到消失的效果,但是这个消失的效果并不好,因为还能够选中文字,当然也并没有脱离文档流



## overflow

`overflow`属性指定如果元素的大小超出容器时的行为。

- `visible`：默认值，表示溢出的部分可见
- `hidden`：表示溢出的部分不可见
- `scroll`：表示发生溢出时，会显示滚动条，用户可以拖动滚动条，看到溢出的部分



## float

float 属性定义元素在哪个方向浮动。以往这个属性总应用于图像，使文本围绕在图像周围，不过在 CSS 中，任何元素都可以浮动。浮动元素会生成一个块级框，而不论它本身是何种元素。

如果浮动非替换元素，则要指定一个明确的宽度；否则，它们会尽可能地窄。

**注释：**假如在一行之上只有极少的空间可供浮动元素，那么这个元素会跳至下一行，这个过程会持续到某一行拥有足够的空间为止。

**可能的值**

| 值      | 描述                                                 |
| :------ | :--------------------------------------------------- |
| left    | 元素向左浮动。                                       |
| right   | 元素向右浮动。                                       |
| none    | 默认值。元素不浮动，并会显示在其在文本中出现的位置。 |
| inherit | 规定应该从父元素继承 float 属性的值。                |



## clear

clear 属性规定元素的哪一侧不允许其他浮动元素。

clear 属性定义了元素的哪边上不允许出现浮动元素。在 CSS1 和 CSS2 中，这是通过自动为清除元素（即设置了 clear 属性的元素）增加上外边距实现的。

在 CSS2.1 中，会在元素上外边距之上增加清除空间，而外边距本身并不改变。不论哪一种改变，最终结果都一样，如果声明为左边或右边清除，会使元素的上外边框边界刚好在该边上浮动元素的下外边距边界之下。

**可能的值**

| 值      | 描述                                  |
| :------ | :------------------------------------ |
| left    | 在左侧不允许浮动元素。                |
| right   | 在右侧不允许浮动元素。                |
| both    | 在左右两侧均不允许浮动元素。          |
| none    | 默认值。允许浮动元素出现在两侧。      |
| inherit | 规定应该从父元素继承 clear 属性的值。 |



## 内联元素和块元素

内联元素不能设置width和height

设置水平内边距,内联元素可以设置水平方向的内边距

垂直方向内边距，内联元素可以设置垂直方向内边距，但是不会影响页面的布局

内联元素可以设置边框，但是垂直的边框不会影响到页面的布局

内联元素支持水平方向的外边距

内联元素不支持垂直外边距



## BFC 环境

**全称叫block formatting context块级格式化上下文,具有流体特性**

**作用: ** 元素内部的标签无论发生什么情况都不会影响其本身的位置的值的计算，它是一个环境，是一个独立的渲染区域，它规定了内部的块级别的Box如何布局，且BFC内和BFC外各不相干。

**开启BFC环境的方式:**

- overflow值不为visible都能开启
- float的值不为none
- position的值为绝对和固定定位
- display的值为inline-block,flex,inline-flex等

**常见用法:**

- 阻止兄弟元素上下外边距的合并问题,具体可用一个大盒子包裹下方的盒子,然后让大盒子overflow:hidden开启 BFC环境
- 防止因子元素浮动而导致的父元素高度塌陷问题
- 用作双栏式的页面布局,左边是固定宽度,右边是自适应的宽度,这种布局需要给左边的导航栏开启BFC,让左边的内容被隔离出来,类似于float,但是又占着原来的位置,左右两个部分相当于是inline-block的表现形式

```css
top {
    overflow:hidden;
    width:300px;
    height:200px;
    background:red
}
bottom {
    height:200px;
    background:green
}
<div class="top">    
</div>
<div class="bottom">
</div>
```



## 元素高度塌陷问题

### 文档流

文档流处在网页的最底层，它表示的是一个页面中的位置，我们所创建的元素默认都处在文档流中。				 

元素在文档流中的特点：

**块元素**

1. 块元素在文档流中会独占一行，块元素会自上向下排列。

2. 块元素在文档流中默认宽度是父元素的100%

3. 块元素在文档流中的高度默认被内容撑开

**内联元素**		

1. 内联元素在文档流中只占自身的大小，会默认从左向右排列，如果一行中不足以容纳所有的内联元素，则换到下一行，继续自左向右。
2. 在文档流中，内联元素的宽度和高度默认都被内容撑开	 

### 浮动解释

块元素在文档流中默认垂直排列，所以这个三个div自上至下依次排开，如果希望块元素在页面中水平排列，可以使块元素脱离文档流。

**使用float来使元素浮动，从而脱离文档流**

可选值：

* none，默认值，元素默认在文档流中排列
* left，元素会立即脱离文档流，向页面的左侧浮动
* right，元素会立即脱离文档流，向页面的右侧浮动

注意：

1. 当为一个元素设置浮动以后（float属性是一个非none的值），元素会立即脱离文档流，元素脱离文档流以后，它下边的元素会立即向上移动
2. 元素浮动以后，会尽量向页面的左上或这是右上漂浮，**直到遇到父元素的边框或者其他的浮动元素**
3. **如果浮动元素上边是一个没有浮动的块元素，则浮动元素不会超过块元素**
4. **浮动的元素不会超过他上边的兄弟元素**，最多最多一边齐
5. **浮动的元素不会盖住文字**，文字会自动环绕在浮动元素的周围，所以我们可以通过浮动来设置文字环绕图片的效果
6. 在文档流中，子元素的宽度默认占父元素的全部
7. 当元素设置浮动以后，会完全脱离文档流，**块元素脱离文档流以后，高度和宽度都被内容撑开**
8. 开启span的浮动，**内联元素脱离文档流以后会变成块元素**（内联元素本身设置宽高没有意义）



### 高度塌陷问题来由

在文档流中，父元素的高度默认是被子元素撑开的，也就是子元素多高，父元素就多高。

但是当为子元素设置浮动以后，子元素会完全脱离文档流，此时将会导致子元素无法撑起父元素的高度，导致父元素的高度塌陷。

由于父元素的高度塌陷了，则父元素下的所有元素都会向上移动，这样将会导致页面布局混乱。



### 解决高度塌陷

#### 方法一

​	我们可以将**父元素的高度写死**，以避免塌陷的问题出现，但是一旦高度写死，父元素的高度将不能自动适应子元素的高度，所以这种方案是**不推荐使用**的。

#### 方法二

根据W3C的标准，在页面中元素都一个隐含的属性叫做Block Formatting Context，简称**BFC**，该属性可以设置打开或者关闭，默认是关闭的。

当开启元素的BFC以后，元素将会具有如下的特性：

1. 父元素的垂直外边距不会和子元素重叠	

2. 开启BFC的元素不会被浮动元素所覆盖

3. 开启BFC的元素可以包含浮动的子元素


**如何开启元素的BFC**

1. 设置元素浮动，使用这种方式开启，虽然可以撑开父元素，但是会导致父元素的宽度丢失，而且使用这种方式也会导致下边的元素上移，不能解决问题

2. 设置元素绝对定位

3. 设置元素为inline-block，可以解决问题，但是会导致宽度丢失，不推荐使用这种方式

4. **将元素的overflow设置为一个非visible的值**，此为推荐方式：将overflow设置为hidden是副作用最小的开启BFC的方式。	

但是在IE6及以下的浏览器中并不支持BFC，所以使用这种方式不能兼容IE6。在IE6中虽然没有BFC，但是具有另一个隐含的属性叫做hasLayout，该属性的作用和BFC类似，所在IE6浏览器可以通过开hasLayout来解决该问题

开启方式很多，我们直接使用一种副作用最小的：

直接将元素的zoom设置为1即可

zoom表示放大的意思，后边跟着一个数值，写几就将元素放大几倍

zoom:1 表示不放大元素，但是通过该样式可以开启hasLayout

zoom这个样式，只在IE中支持，其他浏览器都不支持

#### 方法三

##### 清楚浮动介绍

我们有时希望清除掉其他元素浮动对当前元素产生的影响，这时可以使用clear来完成功能

clear可以用来清除其他浮动元素对当前元素的影响

可选值：

none，默认值，不清除浮动

left，清除左侧浮动元素对当前元素的影响

right，清除右侧浮动元素对当前元素的影响

both，清除两侧浮动元素对当前元素的影响

##### 解法

可以直接在高度塌陷的父元素的最后，添加一个空白的div

由于这个div并没有浮动，所以他是可以撑开父元素的高度的，然后在对其进行清除浮动，这样可以通过这个空白的div来撑开父元素的高度，

基本没有副作用，使用这种方式虽然可以解决问题，但是会在页面中添加多余的结构。

```css
/*通过after伪类，选中box1的后边*/
/*
* 可以通过after伪类向元素的最后添加一个空白的块元素，然后对其清除浮动，
* 	这样做和添加一个div的原理一样，可以达到一个相同的效果，
* 	而且不会在页面中添加多余的div，这是我们最推荐使用的方式，几乎没有副作用
*/

.clearfix::after{
    /*添加一个内容*/
    content: "";
    /*转换为一个块元素*/
    display: table;
    /*清除两侧的浮动*/
    clear: both;
}


/*
* 在IE6中不支持after伪类,
* 	所以在IE6中还需要使用hasLayout来处理
*/
.clearfix{
	zoom:1;
}
```



## clip

`clip`规则指定元素超出容器大小时，具体显示哪个部分。它只对绝对定位（absolute）和固定定位（fixed）的元素有效。

```css
clip: rect(0px, 100px, 100px, 0px);
```

`react`函数四个参数的含义如下。

- 第一个参数：剪切后的顶边距离容器的顶边的距离
- 第二个参数：剪切后的右边界距离容器的左边界的距离
- 第三个参数：剪切后的底边距离容器的顶边的距离
- 第四个参数：剪切后的左边界距离容器的左边界的距离

```css
clip: rect(auto 100px auto auto);
```

该规则已经被废除，但是浏览器还是普遍支持。



## clip-path

`clip-path`是`clip`规则的继承者，用来剪切元素的大小。它对所有定位方式都适用。

```css
clip: rect(110px, 160px, 170px, 60px);
/* 等同于 */
clip-path: inset(10px 20px 30px 40px);
```

`clip-path`支持多种路径定义方式。

```css
.clip-me {

  /* referencing path from an inline SVG <clipPath> */
  clip-path: url(#c1);

  /* referencing path from external SVG */
  clip-path: url(path.svg#c1);

  /* polygon */
  clip-path: polygon(5% 5%, 100% 0%, 100% 75%, 75% 75%, 75% 100%, 50% 75%, 0% 75%);

  /* circle */
  clip-path: circle(30px at 35px 35px);

  /* ellipse */
  clip-path: ellipse(65px 30px at 125px 40px);

  /* inset-rectangle() may replace inset() ? */
  /* rectangle() coming in SVG 2 */

  /* rounded corners... not sure if a thing anymore */
  clip-path: inset(10% 10% 10% 10% round 20%, 20%);

}
```



## object-fit

`object-fit`命令指定一个元素的大小应该如何适应它的容器，主要用于图像。它可以取以下的值。

- fill：容器的宽度和高度就是元素的宽度和高度，会截去溢出的部分。
- contain：元素会填满容器，不会改变长宽比，可能会有溢出。
- cover：元素会填满容器，可能会改变长宽比，但不会有溢出。
- none：元素不会改变的大小，具体的展示效果由默认算法决定
- scale-down：展示效果会选择`none`或`contain`之中，对象尺寸较小的一个
- inherit：使用父元素的值
- initial：使用浏览器的默认值
- unset：这个属性是`inherit`和`initial`的结合，如果该元素继承父元素，就采用`inherit`，否则采用`initial`



